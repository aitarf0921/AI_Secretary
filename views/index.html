<!doctype html>
<html lang="zh-TW">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title data-i18n="title">
            AI 助手 Widget 嵌入教學 · Create Your Own Assistant
        </title>
        <style>
            :root {
                --bg: #f7f9fc;
                --card: #fff;
                --text: #1b2838;
                --muted: #6b7a90;
                --primary: #2563eb;
                --ok: #10b981;
                --border: #e6ecf2;
                --mono:
                    ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
            }
            * {
                box-sizing: border-box;
            }
            html,
            body {
                margin: 0;
                min-height: 100%;
                background: var(--bg);
                color: var(--text);
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    "Noto Sans TC", "PingFang TC", "Microsoft JhengHei",
                    "Noto Sans SC", "PingFang SC", "Hiragino Sans",
                    "Noto Sans JP", Arial, sans-serif;
            }
            header {
                padding: 20px 16px;
                border-bottom: 1px solid var(--border);
                background: #fff;
            }
            .wrap {
                max-width: 1120px;
                margin: 0 auto;
                display: flex;
                align-items: center;
                gap: 12px;
                flex-wrap: wrap;
            }
            .brand {
                font-weight: 800;
                font-size: clamp(18px, 2.8vw, 22px);
            }
            .spacer {
                flex: 1;
            }
            .lang {
                display: inline-flex;
                gap: 6px;
                border: 1px solid var(--border);
                border-radius: 999px;
                padding: 4px;
                background: #fff;
            }
            .lang button {
                border: 0;
                background: transparent;
                padding: 6px 12px;
                border-radius: 999px;
                cursor: pointer;
            }
            .lang button.active {
                background: #eef2ff;
                color: #1f2a7a;
                font-weight: 700;
            }
            .container {
                max-width: 1120px;
                margin: 24px auto 120px;
                padding: 0 16px;
                display: grid;
                grid-template-columns: 1fr;
                gap: 16px;
            }
            @media (min-width: 980px) {
                .container {
                    grid-template-columns: 1.15fr 0.85fr;
                }
            }
            .card {
                background: var(--card);
                border: 1px solid var(--border);
                border-radius: 14px;
                padding: 18px;
                box-shadow: 0 6px 24px rgba(16, 24, 40, 0.04);
            }
            h2 {
                margin: 4px 0 12px;
                font-size: 20px;
            }
            h3 {
                margin: 18px 0 8px;
                font-size: 16px;
            }
            p {
                line-height: 1.65;
            }
            .muted {
                color: var(--muted);
            }
            .code {
                position: relative;
                background: #0b1220;
                color: #e6edf3;
                border-radius: 10px;
                padding: 14px;
                border: 1px solid #0f1b33;
            }
            pre {
                margin: 0;
                overflow: auto;
                white-space: pre;
            }
            code {
                font-family: var(--mono);
                font-size: 13px;
            }
            .btn {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 8px 12px;
                border-radius: 10px;
                border: 1px solid var(--border);
                background: #fff;
                cursor: pointer;
            }
            .btn.primary {
                background: var(--primary);
                color: #fff;
                border-color: transparent;
            }
            .btn.small {
                padding: 6px 10px;
                font-size: 12px;
            }
            .copy-btn {
                position: absolute;
                top: 10px;
                right: 10px;
            }
            table {
                width: 100%;
                border-collapse: collapse;
                border: 1px solid var(--border);
                border-radius: 10px;
                overflow: hidden;
            }
            th,
            td {
                padding: 10px 12px;
                border-bottom: 1px solid var(--border);
                text-align: left;
                vertical-align: top;
            }
            th {
                background: #f0f4fa;
                font-weight: 600;
            }
            tr:last-child td {
                border-bottom: 0;
            }
            .badge {
                display: inline-block;
                font-size: 11px;
                padding: 2px 8px;
                border-radius: 999px;
                background: #eef2ff;
                color: #354ab8;
                border: 1px solid #d8defc;
            }
            .note {
                font-size: 13px;
                color: var(--muted);
            }
            footer {
                max-width: 1120px;
                margin: 40px auto 24px;
                padding: 0 16px;
                color: var(--muted);
                font-size: 13px;
                text-align: center;
            }
            .grid {
                display: grid;
                gap: 12px;
            }
            .grid.two {
                grid-template-columns: 1fr;
            }
            @media (min-width: 760px) {
                .grid.two {
                    grid-template-columns: 1fr 1fr;
                }
            }
            .field {
                display: flex;
                flex-direction: column;
                gap: 6px;
            }
            .field textarea {
                width: 100%;
                min-height: 120px;
                resize: vertical;
                border: 1px solid var(--border);
                border-radius: 10px;
                padding: 10px 12px;
                font-size: 14px;
                background: #fff;
            }
            .counter {
                font-size: 12px;
                color: var(--muted);
                text-align: right;
            }
        </style>
    </head>
    <body>
        <header>
            <div class="wrap">
                <div class="brand" data-i18n="brand">AI 助手 Widget</div>
                <div class="spacer"></div>
                <div class="lang" id="lang-switch">
                    <button data-lang="zh-TW" class="active">繁中</button>
                    <button data-lang="zh-CN">简中</button>
                    <button data-lang="ja">日本語</button>
                    <button data-lang="en">English</button>
                </div>
            </div>
        </header>

        <main class="container">
            <section class="card">
                <h2 data-i18n="quickStart.title">快速開始</h2>
                <p data-i18n="quickStart.desc">
                    在網站 <code>&lt;/body&gt;</code> 前貼上這段程式碼：
                </p>

                <div class="code" id="codebox">
                    <button
                        class="btn small copy-btn"
                        id="copy"
                        data-i18n="copy"
                    >
                        複製
                    </button>
                    <pre><code id="embed-code">&lt;script
  src="https://d1apwn2mo5o5aj.cloudfront.net/js/ai-helper-loader.js"
  data-position="bottom-right"
  data-site="aitarf_15oJOoBsQFa3"
  data-accent="#25d366"
  data-width="360"
  data-height="520"
  data-z="2147483000"
  defer
&gt;&lt;/script&gt;</code></pre>
                </div>

                <h3 data-i18n="params.title">參數說明</h3>
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="params.th1">屬性</th>
                            <th data-i18n="params.th2">必填</th>
                            <th data-i18n="params.th3">範例</th>
                            <th data-i18n="params.th4">說明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>src</code></td>
                            <td>
                                <span class="badge" data-i18n="required"
                                    >必填</span
                                >
                            </td>
                            <td>
                                <code
                                    >https://d1apwn2mo5o5aj.cloudfront.net/js/ai-helper-loader.js</code
                                >
                            </td>
                            <td data-i18n="params.src">
                                載入 widget 的 loader 腳本。
                            </td>
                        </tr>
                        <tr>
                            <td><code>data-position</code></td>
                            <td>
                                <span class="badge" data-i18n="optional"
                                    >可選</span
                                >
                            </td>
                            <td>
                                <code>bottom-right</code> /
                                <code>bottom-left</code>
                            </td>
                            <td data-i18n="params.position">
                                懸浮按鈕位置，預設 <code>bottom-right</code>。
                            </td>
                        </tr>
                        <tr>
                            <td><code>data-site</code></td>
                            <td>
                                <span class="badge" data-i18n="required"
                                    >必填</span
                                >
                            </td>
                            <td><code>aitarf_15oJOoBsQFa3</code></td>
                            <td data-i18n="params.site">
                                站點/專案 ID，用於後端選擇知識庫。
                            </td>
                        </tr>
                        <tr>
                            <td><code>data-accent</code></td>
                            <td>
                                <span class="badge" data-i18n="optional"
                                    >可選</span
                                >
                            </td>
                            <td><code>#25d366</code></td>
                            <td data-i18n="params.accent">
                                主題色（HEX 或 RGB(A)）。不合法值會回退預設。
                            </td>
                        </tr>
                        <tr>
                            <td><code>data-width</code></td>
                            <td>
                                <span class="badge" data-i18n="optional"
                                    >可選</span
                                >
                            </td>
                            <td><code>360</code></td>
                            <td data-i18n="params.width">
                                面板寬度（px），最小 240。
                            </td>
                        </tr>
                        <tr>
                            <td><code>data-height</code></td>
                            <td>
                                <span class="badge" data-i18n="optional"
                                    >可選</span
                                >
                            </td>
                            <td><code>520</code></td>
                            <td data-i18n="params.height">
                                面板高度（px），最小 320；手機自動 RWD。
                            </td>
                        </tr>
                        <tr>
                            <td><code>data-z</code></td>
                            <td>
                                <span class="badge" data-i18n="optional"
                                    >可選</span
                                >
                            </td>
                            <td><code>2147483000</code></td>
                            <td data-i18n="params.z">
                                元件 z-index，避免被覆蓋。
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3 data-i18n="create.title" style="margin-top: 18px">
                    建立你的 AI 助手
                </h3>
                <p class="note" data-i18n="create.note">
                    登入後輸入最多 500 字的知識庫，將回傳專屬
                    <code>data-site</code>。
                </p>

                <div class="grid two">
                    <div class="field">
                        <label for="kb" data-i18n="create.label"
                            >知識庫文字（最多 500 字）</label
                        >
                        <textarea
                            id="kb"
                            maxlength="500"
                            placeholder="請輸入你的產品/品牌/服務重點…"
                            data-i18n-ph="create.ph"
                        ></textarea>
                        <div class="counter">
                            <span id="kb-count">0</span> / 500
                        </div>
                        <button
                            class="btn primary"
                            id="btn-create"
                            data-i18n="create.btn"
                        >
                            建立專屬助手
                        </button>
                    </div>
                    <div class="field">
                        <label data-i18n="create.result">建立結果</label>
                        <input
                            id="site-out"
                            type="text"
                            readonly
                            placeholder="data-site 會顯示在這裡"
                            data-i18n-ph="create.sitePh"
                            style="
                                border: 1px solid var(--border);
                                border-radius: 10px;
                                padding: 10px 12px;
                                background: #f8fafc;
                            "
                        />
                        <p class="note" data-i18n="create.embedTip">
                            下方安裝碼會自動套用新的
                            <code>data-site</code>，右下角也會即時預覽。
                        </p>
                    </div>
                </div>
            </section>

            <aside class="card">
                <h2 data-i18n="demo.title">即時示範</h2>
                <p class="muted" data-i18n="demo.desc">
                    本頁面右下角已載入一個 AI 助手
                    widget。你亦可用下方最小安裝碼：
                </p>
                <div class="code" style="margin-top: 10px">
                    <pre><code id="embed-mini">&lt;script
  src="https://d1apwn2mo5o5aj.cloudfront.net/js/ai-helper-loader.js"
  data-site="aitarf_15oJOoBsQFa3"
  defer
&gt;&lt;/script&gt;</code></pre>
                </div>
            </aside>
        </main>

        <footer data-i18n="footer">
            © 2025 AI 助手 Widget 教學頁 · RWD 支援 · 自建助手
        </footer>

        <script>
            // 多語字典
            const STR = {
                "zh-TW": {
                    title: "AI 助手 Widget 嵌入教學 · Create Your Own Assistant",
                    brand: "AI 助手 Widget",
                    copy: "複製",
                    quickStart: {
                        title: "快速開始",
                        desc: "在網站 </body> 前貼上這段程式碼：",
                    },
                    params: {
                        title: "參數說明",
                        th1: "屬性",
                        th2: "必填",
                        th3: "範例",
                        th4: "說明",
                        src: "載入 widget 的 loader 腳本。",
                        position: "懸浮按鈕位置，預設 bottom-right。",
                        site: "站點/專案 ID，用於後端選擇知識庫。",
                        accent: "主題色（HEX 或 RGB(A)）。不合法值會回退預設。",
                        width: "面板寬度（px），最小 240。",
                        height: "面板高度（px），最小 320；手機自動 RWD。",
                        z: "元件 z-index，避免被覆蓋。",
                    },
                    required: "必填",
                    optional: "可選",
                    create: {
                        title: "建立你的 AI 助手",
                        note: "登入後輸入最多 500 字的知識庫，將回傳專屬 data-site。",
                        label: "知識庫文字（最多 500 字）",
                        btn: "建立專屬助手",
                        result: "建立結果",
                        embedTip:
                            "下方安裝碼會自動套用新的 data-site，右下角也會即時預覽。",
                        ph: "請輸入你的產品/品牌/服務重點…",
                        sitePh: "data-site 會顯示在這裡",
                    },
                    demo: {
                        title: "即時示範",
                        desc: "本頁面右下角已載入一個 AI 助手 widget。你亦可用下方最小安裝碼：",
                    },
                    footer: "© 2025 AI 助手 Widget 教學頁 · RWD 支援 · 自建助手",
                },
                "zh-CN": {
                    title: "AI 助手挂件嵌入教程 · Create Your Own Assistant",
                    brand: "AI 助手挂件",
                    copy: "复制",
                    quickStart: {
                        title: "快速开始",
                        desc: "在网站 </body> 前粘贴以下代码：",
                    },
                    params: {
                        title: "参数说明",
                        th1: "属性",
                        th2: "必填",
                        th3: "示例",
                        th4: "说明",
                        src: "加载 widget 的 loader 脚本。",
                        position: "悬浮按钮位置，默认 bottom-right。",
                        site: "站点/项目 ID，用于后端选择知识库。",
                        accent: "主题色（HEX 或 RGB(A)）；非法值将回退为默认。",
                        width: "面板宽度（px），最小 240。",
                        height: "面板高度（px），最小 320；移动端自适应。",
                        z: "组件 z-index，避免被遮挡。",
                    },
                    required: "必填",
                    optional: "可选",
                    create: {
                        title: "创建你的 AI 助手",
                        note: "登录后输入最多 500 字的知识库，将返回专属 data-site。",
                        label: "知识库文本（最多 500 字）",
                        btn: "创建专属助手",
                        result: "创建结果",
                        embedTip:
                            "下方安装代码会自动替换新的 data-site，右下角预览会实时更新。",
                        ph: "请输入你的产品/品牌/服务要点…",
                        sitePh: "data-site 将显示在此处",
                    },
                    demo: {
                        title: "即时示范",
                        desc: "本页右下角已加载一个 AI 助手 widget。你也可以使用下方最小安装代码：",
                    },
                    footer: "© 2025 AI 助手挂件教学页 · RWD 支持 · 自建助手",
                },
                ja: {
                    title: "AI アシスタントウィジェット導入ガイド · Create Your Own Assistant",
                    brand: "AI アシスタントウィジェット",
                    copy: "コピー",
                    quickStart: {
                        title: "クイックスタート",
                        desc: "サイトの </body> 直前に次のスニペットを貼り付けてください。",
                    },
                    params: {
                        title: "パラメータ",
                        th1: "属性",
                        th2: "必須",
                        th3: "例",
                        th4: "説明",
                        src: "ウィジェットのローダースクリプトを読み込みます。",
                        position:
                            "フローティングボタンの位置。既定は bottom-right。",
                        site: "サイト/プロジェクト ID。バックエンドでナレッジベースを選択します。",
                        accent: "テーマカラー（HEX または RGB(A)）。不正な値は既定値にフォールバックします。",
                        width: "パネル幅（px）。最小 240。",
                        height: "パネル高さ（px）。最小 320。モバイルはレスポンシブ対応。",
                        z: "ウィジェットの z-index。重なり順の調整に使用します。",
                    },
                    required: "必須",
                    optional: "任意",
                    create: {
                        title: "自分のアシスタントを作成",
                        note: "ログイン後、最大 500 文字のナレッジを入力すると、専用の data-site を発行します。",
                        label: "ナレッジ（最大 500 文字）",
                        btn: "アシスタントを作成",
                        result: "作成結果",
                        embedTip:
                            "下の埋め込みコードは新しい data-site に自動更新され、右下のプレビューも反映されます。",
                        ph: "製品・ブランド・サービスの要点を入力してください…",
                        sitePh: "ここに data-site が表示されます",
                    },
                    demo: {
                        title: "ライブデモ",
                        desc: "このページの右下にはウィジェットが読み込まれています。最小スニペット：",
                    },
                    footer: "© 2025 AI アシスタントウィジェット · RWD 対応 · 自作アシスタント",
                },
                en: {
                    title: "AI Assistant Widget · Create Your Own",
                    brand: "AI Assistant Widget",
                    copy: "Copy",
                    quickStart: {
                        title: "Quick Start",
                        desc: "Paste this snippet before </body> on your site:",
                    },
                    params: {
                        title: "Parameters",
                        th1: "Attr",
                        th2: "Req",
                        th3: "Example",
                        th4: "Description",
                        src: "Loader script for the widget.",
                        position:
                            "Floating button position. Default is bottom-right.",
                        site: "Site/Project ID used by backend to pick the knowledge base.",
                        accent: "Theme color (HEX or RGB(A)); invalid values fall back to default.",
                        width: "Panel width (px), min 240.",
                        height: "Panel height (px), min 320; mobile is responsive.",
                        z: "Widget z-index to avoid being covered.",
                    },
                    required: "Required",
                    optional: "Optional",
                    create: {
                        title: "Create Your Assistant",
                        note: "Sign in, enter up to 500 chars; you will get a unique data-site.",
                        label: "Knowledge (max 500 chars)",
                        btn: "Create Assistant",
                        result: "Result",
                        embedTip:
                            "The embed code below will update with your data-site and the demo refreshes.",
                        ph: "Type your product/brand/service highlights…",
                        sitePh: "Your data-site appears here",
                    },
                    demo: {
                        title: "Live Demo",
                        desc: "This page already embeds the widget at bottom-right. Minimal snippet:",
                    },
                    footer: "© 2025 AI Assistant Widget · RWD Ready · Build Your Own",
                },
            };

            // 語言初始化（正確處理運算子優先序）
            const saved = localStorage.getItem("aiw_lang");
            const navLang = (navigator.language || "zh-TW").toLowerCase();
            const guess =
                navLang.startsWith("zh-cn") || navLang === "zh"
                    ? "zh-CN"
                    : navLang.startsWith("zh")
                      ? "zh-TW"
                      : navLang.startsWith("ja")
                        ? "ja"
                        : "en";
            let CUR = saved || guess;

            function applyLang() {
                const T = STR[CUR];

                // data-i18n 元素
                document.querySelectorAll("[data-i18n]").forEach((el) => {
                    const key = el.getAttribute("data-i18n");
                    const parts = key.split(".");
                    let v = T;
                    for (const p of parts) v = v?.[p];
                    if (typeof v === "string") {
                        if (el.tagName.toLowerCase() === "title")
                            document.title = v;
                        else el.innerHTML = v;
                    }
                });

                // placeholder
                document.querySelectorAll("[data-i18n-ph]").forEach((el) => {
                    const key = el.getAttribute("data-i18n-ph");
                    const parts = key.split(".");
                    let v = T;
                    for (const p of parts) v = v?.[p];
                    if (typeof v === "string")
                        el.setAttribute("placeholder", v);
                });

                // 參數表徽章
                document.querySelectorAll(".badge").forEach((b) => {
                    const isReq = /必填|Required|必須|必須項目/i.test(
                        b.textContent,
                    );
                    b.textContent = isReq ? T.required : T.optional;
                });

                // 按鈕樣式 & <html lang>
                document
                    .querySelectorAll("#lang-switch button")
                    .forEach((btn) => {
                        btn.classList.toggle(
                            "active",
                            btn.getAttribute("data-lang") === CUR,
                        );
                    });
                document.documentElement.setAttribute("lang", CUR);
            }

            document
                .getElementById("lang-switch")
                .addEventListener("click", (e) => {
                    const btn = e.target.closest("button");
                    if (!btn) return;
                    CUR = btn.getAttribute("data-lang");
                    localStorage.setItem("aiw_lang", CUR);
                    applyLang();
                });

            // 計數與複製
            const kb = document.getElementById("kb");
            const kbCount = document.getElementById("kb-count");
            kb.addEventListener("input", () => {
                kbCount.textContent = kb.value.length;
            });

            document
                .getElementById("copy")
                .addEventListener("click", async (e) => {
                    const code =
                        document.getElementById("embed-code").innerText;
                    try {
                        await navigator.clipboard.writeText(code);
                        const btn = e.currentTarget;
                        btn.textContent =
                            CUR === "zh-TW"
                                ? "已複製！"
                                : CUR === "zh-CN"
                                  ? "已复制！"
                                  : CUR === "ja"
                                    ? "コピーしました！"
                                    : "Copied!";
                        setTimeout(
                            () => (btn.textContent = STR[CUR].copy || "Copy"),
                            1200,
                        );
                    } catch {
                        const ta = document.createElement("textarea");
                        ta.value = code;
                        document.body.appendChild(ta);
                        ta.select();
                        document.execCommand("copy");
                        document.body.removeChild(ta);
                        const btn = e.currentTarget;
                        btn.textContent =
                            CUR === "zh-TW"
                                ? "已複製！"
                                : CUR === "zh-CN"
                                  ? "已复制！"
                                  : CUR === "ja"
                                    ? "コピーしました！"
                                    : "Copied!";
                        setTimeout(
                            () => (btn.textContent = STR[CUR].copy || "Copy"),
                            1200,
                        );
                    }
                });

            applyLang();
        </script>

        <!-- 右下角示範 widget（僅示範；實際站長會複製上面的 snippet） -->
        <script
            src="https://d1apwn2mo5o5aj.cloudfront.net/js/ai-helper-loader.js"
            data-position="bottom-right"
            data-site="aitarf_15oJOoBsQFa3"
            data-accent="#25d366"
            data-width="360"
            data-height="520"
            data-z="2147483000"
            defer
        ></script>
    </body>
</html>
