<!doctype html>
<html lang="zh-TW">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title data-i18n="title">
            AI Chatbot: Embed a 24/7 Smart Assistant on Your Website
        </title>
        <meta
            name="description"
            content="Embed an AI chatbot effortlessly for 24/7 smart customer support. Customize, integrate a knowledge base, and boost your site's engagement."
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        />
        <link rel="preconnect" href="https://chatbot.aitarf.us" crossorigin />
        <link rel="preconnect" href="https://chatbot.aitarf.us" crossorigin />

        <meta property="og:type" content="website" />
        <meta
            property="og:title"
            content="AI Chatbot — Embed a 24/7 Smart Assistant"
        />
        <meta
            property="og:description"
            content="Embed an AI Chatbot for 24/7 support. No code, multilingual, knowledge base integration."
        />
        <meta property="og:url" content="https://example.com/ai-chatbot" />
        <meta property="og:image" content="https://example.com/og-image.jpg" />
        <meta name="twitter:card" content="summary_large_image" />

        <style>
            :root {
                --bg: #ffffff;
                --card: #fff;
                --text: #1b2838;
                --muted: #6b7a90;
                --primary: #2563eb;
                --ok: #10b981;
                --border: #e6ecf2;
                --mono:
                    ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
                --font-size-base: 16px;
            }
            [data-theme="dark"] {
                --bg: #0f172a;
                --card: #1e293b;
                --text: #f1f5f9;
                --muted: #94a3b8;
                --primary: #3b82f6;
                --ok: #34d399;
                --border: #334155;
            }
            * {
                box-sizing: border-box;
            }
            html,
            body {
                margin: 0;
                min-height: 100vh;
                background: var(--bg);
                color: var(--text);
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    "Noto Sans TC", "PingFang TC", "Microsoft JhengHei",
                    "Noto Sans SC", "PingFang SC", "Hiragino Sans",
                    "Noto Sans JP", Arial, sans-serif;
                font-size: var(--font-size-base);
                line-height: 1.6;
                transition:
                    background-color 0.3s,
                    color 0.3s;
            }
            .hidden {
                display: none !important;
            }
            header {
                padding: clamp(8px, 2vw, 12px) clamp(8px, 4vw, 16px);
                border-bottom: 1px solid var(--border);
                background: var(--card);
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
                gap: 12px;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .wrap {
                display: flex;
                align-items: center;
                gap: 12px;
                flex: 1;
                min-width: 0;
            }
            .brand {
                font-weight: 800;
                font-size: clamp(1rem, 4vw, 1.375rem);
                line-height: 1.2;
                text-align: center;
            }
            @media (max-width: 480px) {
                .brand {
                    font-size: clamp(1rem, 5vw, 1.125rem);
                }
            }
            .controls {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-left: auto;
            }
            .lang-select {
                padding: clamp(4px, 1vw, 6px) clamp(8px, 2vw, 12px);
                border: 1px solid var(--border);
                border-radius: 8px;
                background: var(--card);
                color: var(--text);
                font-size: 0.875rem;
                cursor: pointer;
                min-width: 80px;
            }
            .theme-toggle {
                background: none;
                border: 1px solid var(--border);
                border-radius: 50%;
                width: clamp(32px, 6vw, 40px);
                height: clamp(32px, 6vw, 40px);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--text);
                font-size: clamp(1rem, 3vw, 1.25rem);
                transition: background-color 0.3s;
            }
            .theme-toggle:hover {
                background: var(--border);
            }
            .theme-toggle i {
                transition: color 0.3s;
            }
            main {
                max-width: 1120px;
                margin: 0 auto;
                padding: clamp(8px, 2vw, 16px);
                display: flex;
                flex-direction: column;
                gap: clamp(24px, 4vw, 32px);
            }
            .card {
                background: var(--card);
                border: 1px solid var(--border);
                border-radius: 14px;
                padding: clamp(16px, 4vw, 24px);
                box-shadow: 0 4px 12px rgba(16, 24, 40, 0.08);
                transition:
                    background-color 0.3s,
                    border-color 0.3s;
                width: 100%;
            }
            .hero {
                text-align: center;
                background: linear-gradient(135deg, var(--primary), #3b82f6);
                color: #fff;
                padding: clamp(24px, 8vw, 40px);
                border-radius: 14px;
            }
            .hero h1 {
                font-size: clamp(1.5rem, 6vw, 2rem);
                margin: 0 0 clamp(8px, 2vw, 16px);
                font-weight: 800;
                line-height: 1.3;
            }
            .hero p {
                font-size: clamp(1rem, 3vw, 1.125rem);
                margin: 0 0 clamp(16px, 4vw, 24px);
                opacity: 0.95;
            }
            h2 {
                margin: 0 0 clamp(8px, 2vw, 12px);
                font-size: clamp(1.25rem, 4vw, 1.25rem);
            }
            h3 {
                margin: clamp(16px, 4vw, 24px) 0 clamp(8px, 2vw, 12px);
                font-size: clamp(1rem, 2.5vw, 1rem);
            }
            p {
                line-height: 1.65;
                font-size: clamp(0.875rem, 2.5vw, 1rem);
            }
            .muted {
                color: var(--muted);
                font-size: 0.8125rem;
            }
            .code {
                position: relative;
                background: #0b1220;
                color: #e6edf3;
                border-radius: 10px;
                padding: clamp(12px, 3vw, 16px);
                border: 1px solid #0f1b33;
                overflow-x: auto;
                font-size: 0.8rem;
                margin: clamp(12px, 3vw, 16px) 0;
            }
            .code[data-copyable="true"] {
                cursor: pointer;
            }
            .code[data-copyable="true"]::after {
                content: attr(data-hint);
                position: absolute;
                right: 12px;
                bottom: 10px;
                font-size: 0.75em;
                color: #9fb4d0;
                opacity: 0.85;
                pointer-events: none;
            }
            pre {
                margin: 0;
                overflow: auto;
                white-space: pre;
            }
            code {
                font-family: var(--mono);
                font-size: inherit;
            }
            .btn {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: clamp(10px, 2.5vw, 12px) clamp(16px, 4vw, 20px);
                border-radius: 10px;
                border: 2px solid var(--primary);
                background: var(--primary);
                color: #fff;
                cursor: pointer;
                text-decoration: none;
                transition: all 0.3s;
                white-space: nowrap;
                font-size: clamp(0.875rem, 2.5vw, 1rem);
                font-weight: 600;
                justify-content: center;
                box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
                margin: clamp(8px, 2vw, 12px) 0;
            }
            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(37, 99, 235, 0.4);
            }
            .btn.primary {
                background: var(--primary);
                color: #fff;
                border-color: var(--primary);
            }
            .hero .btn.primary {
                margin-top: clamp(16px, 4vw, 24px);
                border: 2px solid rgba(255, 255, 255, 0.4);
                box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
            }
            .btn.small {
                padding: clamp(6px, 1.5vw, 8px) clamp(12px, 3vw, 16px);
                font-size: 0.875rem;
                margin: clamp(8px, 2vw, 12px) 0;
            }
            .btn[aria-busy="true"] {
                opacity: 0.7;
                cursor: not-allowed;
            }
            .btn[aria-busy="true"]::before {
                content: "";
                width: 14px;
                height: 14px;
                border-radius: 50%;
                border: 2px solid rgba(255, 255, 255, 0.6);
                border-top-color: #fff;
                display: inline-block;
                margin-right: 6px;
                animation: spin 0.8s linear infinite;
            }
            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }
            .benefits {
                width: max-content;
                max-width: 100%;
                margin: clamp(12px, 3vw, 16px) auto;
                text-align: left;
                display: grid;
                gap: clamp(12px, 3vw, 16px);
                justify-items: start;
            }
            .benefit-item {
                display: grid;
                grid-template-columns: 28px minmax(0, 1fr);
                column-gap: 12px;
                align-items: center;
                max-width: 100%;
                text-align: left;
                font-size: 0.875rem;
            }
            .benefit-icon {
                background: var(--ok);
                color: #fff;
                width: 28px;
                height: 28px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.9rem;
                flex-shrink: 0;
            }
            .benefit-item span {
                display: block;
                line-height: 1.5;
                word-break: break-word;
                white-space: normal;
                text-align: left;
            }
            .table-wrap {
                width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            .parameters-table {
                width: 100%;
                border-collapse: collapse;
                table-layout: fixed;
                background: #fff;
                color: #000;
                border: 1px solid #000;
            }
            .parameters-table th,
            .parameters-table td {
                border: 1px solid #000;
                padding: 10px;
                vertical-align: top;
                font-size: 14px;
                line-height: 1.5;
                word-break: break-word;
                white-space: normal;
            }
            .parameters-table th {
                font-weight: 700;
                background: #fff;
            }
            @media (max-width: 768px) {
                .parameters-table th,
                .parameters-table td {
                    font-size: 13px;
                }
            }
            [data-theme="dark"] .parameters-table {
                background: #0b0b0b;
                color: #fff;
                border-color: #fff;
            }
            [data-theme="dark"] .parameters-table th,
            [data-theme="dark"] .parameters-table td {
                border-color: #fff;
                background: #0b0b0b;
                color: #fff;
            }
            .badge {
                display: inline-block;
                padding: 2px 6px;
                border: 1px solid currentColor;
                border-radius: 6px;
                font-size: 0.75rem;
            }
            .toast {
                position: fixed;
                left: 50%;
                bottom: 24px;
                transform: translateX(-50%);
                background: rgba(15, 23, 42, 0.92);
                color: #fff;
                padding: 10px 14px;
                border-radius: 10px;
                font-size: 0.875rem;
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
                z-index: 2147483647;
                opacity: 0;
                transition:
                    opacity 0.2s,
                    transform 0.2s;
                pointer-events: none;
            }
            .toast.show {
                opacity: 1;
                transform: translateX(-50%) translateY(-4px);
            }
            .notice-info {
                background: rgba(37, 99, 235, 0.1);
                border: 2px solid var(--primary);
                border-radius: 10px;
                padding: 12px 16px;
                margin: 16px 0;
                font-weight: 700;
                color: var(--primary);
            }
            footer {
                max-width: 1120px;
                margin: clamp(24px, 6vw, 40px) auto 0;
                padding: 0 clamp(8px, 2vw, 16px);
                color: var(--muted);
                font-size: 0.8125rem;
                text-align: center;
                border-top: 1px solid var(--border);
                padding-top: clamp(16px, 4vw, 20px);
                background: var(--card);
            }
            .grid {
                display: grid;
                gap: clamp(16px, 4vw, 20px);
            }
            .grid.two {
                grid-template-columns: 1fr;
            }
            @media (min-width: 760px) {
                .grid.two {
                    grid-template-columns: 1fr;
                }
            }
            .field {
                display: flex;
                flex-direction: column;
                gap: clamp(8px, 2vw, 12px);
            }
            .field textarea {
                width: 100%;
                min-height: clamp(80px, 20vw, 120px);
                resize: vertical;
                border: 1px solid var(--border);
                border-radius: 10px;
                padding: clamp(8px, 2vw, 12px);
                font-size: 0.875rem;
                background: var(--card);
                color: var(--text);
                transition:
                    background-color 0.3s,
                    color 0.3s;
                margin-bottom: clamp(4px, 1vw, 8px);
            }
            .counter {
                font-size: 0.75rem;
                color: var(--muted);
                text-align: right;
            }
            @media (max-width: 480px) {
                :root {
                    --font-size-base: 18px;
                }
                html,
                body {
                    line-height: 1.7;
                }
                header {
                    flex-direction: column;
                    align-items: stretch;
                    gap: 8px;
                }
                .wrap {
                    justify-content: center;
                    order: 2;
                }
                .controls {
                    width: 100%;
                    justify-content: center;
                    order: 1;
                }
                .hero {
                    padding: clamp(20px, 10vw, 24px);
                }
                .hero h1 {
                    font-size: clamp(1.75rem, 8vw, 2rem);
                }
                .hero p {
                    font-size: clamp(1.125rem, 4vw, 1.25rem);
                }
                .card {
                    padding: clamp(16px, 8vw, 20px);
                }
                .btn {
                    width: 100%;
                    padding: clamp(12px, 4vw, 16px);
                    font-size: 1rem;
                    margin: clamp(12px, 4vw, 16px) 0;
                }
                .grid.two {
                    grid-template-columns: 1fr;
                    gap: clamp(20px, 6vw, 24px);
                }
                .field textarea {
                    font-size: 1rem;
                    padding: clamp(12px, 4vw, 16px);
                }
                footer {
                    font-size: clamp(0.875rem, 3vw, 1rem);
                }
                .benefits {
                    max-width: 92vw;
                }
                .benefit-item {
                    grid-template-columns: 28px 1fr;
                }
            }
            @media (min-width: 481px) and (max-width: 768px) {
                .grid.two {
                    grid-template-columns: 1fr;
                }
            }
            /* Modal 樣式 */
            #email-verification-modal {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(15, 23, 42, 0.3);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
            }
            .modal-content {
                max-width: 90%;
                width: 400px;
                padding: clamp(16px, 4vw, 24px);
            }
            .modal-content input {
                width: 100%;
                padding: clamp(8px, 2vw, 12px);
                border: 1px solid var(--border);
                border-radius: 10px;
                font-size: 0.875rem;
                margin-bottom: clamp(8px, 2vw, 12px);
            }
            .modal-content .btn {
                width: 100%;
            }
            .modal-content .error {
                color: #dc2626;
                font-size: 0.8125rem;
                margin-top: 8px;
                display: none;
            }
            .modal-content .countdown {
                color: var(--muted);
                font-size: 0.8125rem;
                margin-top: 8px;
            }
            .modal-content .btn-group {
                display: flex;
                gap: clamp(8px, 2vw, 12px);
                margin-top: clamp(8px, 2vw, 12px);
            }
            @media (max-width: 480px) {
                .modal-content {
                    width: 92vw;
                }
                .modal-content .btn-group {
                    flex-direction: column;
                }
            }
        </style>
        <script type="application/ld+json">
            {
                "@context": [
                    "https://chatbot.aitarf.us",
                    { "@language": "en" }
                ],
                "@type": "SoftwareApplication",
                "name": [
                    { "@language": "en", "@value": "AI Chatbot" },
                    { "@language": "zh-TW", "@value": "AI Chatbot" },
                    { "@language": "zh-CN", "@value": "AI Chatbot" },
                    { "@language": "ja", "@value": "AI Chatbot" }
                ],
                "applicationCategory": [
                    "BusinessApplication",
                    "WebApplication"
                ],
                "operatingSystem": ["Web", "Browser"],
                "description": [
                    {
                        "@language": "en",
                        "@value": "Embed an AI Chatbot widget for 24/7 customer support. Multilingual responses, knowledge base integration, and easy copy-paste installation."
                    },
                    {
                        "@language": "zh-TW",
                        "@value": "輕鬆嵌入 AI Chatbot 小工具，提供 24/7 客戶支援。多語言回應、知識庫整合，以及簡單的複製貼上安裝。"
                    },
                    {
                        "@language": "zh-CN",
                        "@value": "轻松嵌入 AI Chatbot 小工具，实现 24/7 客服。多语响应、知识库集成，以及简单的复制粘贴安装。"
                    },
                    {
                        "@language": "ja",
                        "@value": "AI Chatbot ウィジェットを簡単に埋め込み、24/7 のカスタマーサポートを実現。多言語応答、ナレッジベース統合、簡単コピー&ペーストインストール。"
                    }
                ],
                "keywords": [
                    {
                        "@language": "en",
                        "@value": "AI chatbot, customer service bot, virtual assistant, AI secretary, conversational AI, support agent, helpdesk bot, digital aide, automated helper, chatbot program, text virtual assistant, social bot, artificial intelligence conversationalist, virtual agent, virtual human, conversational interface, customer service automation, automated customer support, self-service customer support, digital customer service, aide, apprentice, associate, attendant, backup, colleague, companion, deputy, friend, partner, representative, secretary, AI agent, customer support optimization, employee assistance, human resources bot, sales chatbot, marketing assistant, lead generation helper, no-code support tool, 24/7 digital secretary, interactive AI companion, query resolution bot, feedback collector, appointment scheduler, multilingual support agent, knowledge base navigator, e-commerce helper, FAQ responder, instant reply system, user engagement booster, website integration tool, embeddable AI aide, floating chat secretary"
                    },
                    {
                        "@language": "zh-TW",
                        "@value": "AI, 客服, 助手, 秘書, AI 客服, AI 助手, AI 秘書, 智能客服, 虛擬助手, 聊天秘書, 自動客服, 線上助手, 24小時秘書, 知識庫助手, 多語言客服, 對話式 AI, 支援代理, 幫助台機器人, 數位助理, 自動化幫手, 聊天程式, 文字虛擬助理, 社交機器人, 人工智慧對話者, 虛擬代理, 虛擬人類, 對話介面, 客服自動化, 自動化客戶支援, 自助式客戶支援, 數位客服, 助手, 學徒, 夥伴, 侍從, 備份, 同事, 夥伴, 副手, 朋友, 合作者, 代表, 秘書, AI 代理, 客戶支援優化, 員工協助, 人力資源機器人, 銷售聊天機器人, 行銷助理, 潛在客戶生成幫手, 無程式碼支援工具, 24/7 數位秘書, 互動 AI 夥伴, 查詢解決機器人, 回饋收集者, 預約排程器, 多語言支援代理, 知識庫導航員, 電商幫手, FAQ 回應者, 即時回覆系統, 用戶參與提升器, 網站整合工具, 可嵌入 AI 助理, 浮動聊天秘書"
                    },
                    {
                        "@language": "zh-CN",
                        "@value": "AI, 客服, 助手, 秘书, AI 客服, AI 助手, AI 秘书, 智能客服, 虚拟助手, 聊天秘书, 自动客服, 在线助手, 24小时秘书, 知识库助手, 多语客服, 对话式 AI, 支持代理, 帮助台机器人, 数字助理, 自动化帮手, 聊天程序, 文字虚拟助理, 社交机器人, 人工智能对话者, 虚拟代理, 虚拟人类, 对话界面, 客服自动化, 自动化客户支持, 自助式客户支持, 数字客服, 助手, 学徒, 伙伴, 侍从, 备份, 同事, 伙伴, 副手, 朋友, 合作者, 代表, 秘书, AI 代理, 客户支持优化, 员工协助, 人力资源机器人, 销售聊天机器人, 营销助理, 潜在客户生成帮手, 无代码 支持工具, 24/7 数字秘书, 互动 AI 伙伴, 查询解决机器人, 反馈收集者, 预约排程器, 多语支持代理, 知识库导航员, 电商帮手, FAQ 回应者, 即时回复系统, 用户参与提升器, 网站整合工具, 可嵌入 AI 助理, 浮动聊天秘书"
                    },
                    {
                        "@language": "ja",
                        "@value": "AI, カスタマーサービス, アシスタント, 秘書, AIチャットボット, カスタマーサポートボット, 仮想アシスタント, AI秘書, 会話型AI, サポートエージェント, ヘルプデスクボット, デジタルエイド, 自動化ヘルパー, チャットボットプログラム, テキスト仮想アシスタント, ソーシャルボット, 人工知能会話者, 仮想エージェント, 仮想ヒューマン, 会話インターフェース, カスタマーサービス自動化, 自動化カスタマーサポート, セルフサービスカスタマーサポート, デジタルカスタマーサービス, エイド, 見習い, アソシエイト, 従者, バックアップ, 同僚, コンパニオン, 副官, 友人, パートナー, 代表, 秘書, AIエージェント, カスタマーサポート最適化, 従業員支援, 人事ロボット, セールスチャットボット, マーケティングアシスタント, リードキャプチャボット, ノーコード サポートツール, 24/7 デジタル秘書, インタラクティブAIコンパニオン, クエリ解決ボット, フィードバックコレクター, アポイントメントスケジューラー, 多言語サポートエージェント, ナレッジベースナビゲーター, イーコマースヘルパー, FAQレスポンダー, インスタントリプライシステム, ユーザーエンゲージメントブースター, ウェブサイト統合ツール, 埋め込み可能AIエイド, フローティングチャット秘書"
                    }
                ],
                "knowsAbout": [
                    {
                        "@language": "en",
                        "@value": "AI chatbot widget, customer service automation, multilingual AI assistant, knowledge base QA, website chat integration, copy-paste embed, floating chat button, lead capture chatbot, 24/7 support, no-code AI tools, generative AI integration"
                    },
                    {
                        "@language": "zh-TW",
                        "@value": "AI 聊天機器人小工具, 客戶服務自動化, 多語系 AI 助理, 知識庫問答, 網站聊天整合, 複製貼上嵌入, 浮動聊天按鈕, 潛在客戶擷取聊天機器人, 24/7 支援, 無程式碼 AI 工具, 生成式 AI 整合"
                    },
                    {
                        "@language": "zh-CN",
                        "@value": "AI 聊天机器人小工具, 客户服务自动化, 多语系 AI 助理, 知识库问答, 网站聊天集成, 复制粘贴嵌入, 浮动聊天按钮, 潜在客户捕获聊天机器人, 24/7 支持, 无代码 AI 工具, 生成式 AI 集成"
                    },
                    {
                        "@language": "ja",
                        "@value": "AIチャットボットウィジェット, カスタマーサービス自動化, 多言語 AI アシスタント, ナレッジベース QA, ウェブサイトチャット統合, コピー&ペースト埋め込み, 浮動チャットボタン, リードキャプチャボット, 24/7 サポート, ノーコード AI ツール, 生成 AI 統合"
                    }
                ],
                "url": "https://chatbot.aitarf.us",
                "version": "1.0",
                "author": { "@type": "Organization", "name": "Your Company" },
                "featureList": [
                    {
                        "@language": "en",
                        "@value": "One-click embed in 5 minutes, Custom knowledge base integration, 50+ languages with auto-detection, 24/7 availability for cost reduction, No-code customization, Lead capture and analytics"
                    },
                    {
                        "@language": "zh-TW",
                        "@value": "一鍵嵌入 5 分鐘上線, 自訂知識庫整合, 50+ 語言自動偵測, 24/7 可用性降低成本, 無程式碼客製化, 潛在客戶擷取與分析"
                    },
                    {
                        "@language": "zh-CN",
                        "@value": "一键嵌入 5 分钟上线, 自定义知识库集成, 50+ 语言自动检测, 24/7 可用性降低成本, 无代码自定义, 潜在客户捕获与分析"
                    },
                    {
                        "@language": "ja",
                        "@value": "ワンクリック埋め込み 5 分で公開, カスタムナレッジベース統合, 50+ 言語自動検出, 24/7 稼働でコスト削減, ノーコードカスタマイズ, リードキャプチャと分析"
                    }
                ]
            }
        </script>
    </head>
    <body data-theme="light">
        <header>
            <div class="wrap">
                <div class="brand" data-i18n="brand">
                    AI Chatbot — 輕鬆嵌入智慧助理
                </div>
            </div>
            <div class="controls">
                <select class="lang-select" id="lang-select" title="Language">
                    <option value="zh-TW">繁中</option>
                    <option value="zh-CN">简中</option>
                    <option value="ja">日本語</option>
                    <option value="en">English</option>
                </select>
                <button
                    class="theme-toggle"
                    id="theme-toggle"
                    data-i18n="theme.toggle"
                    title="Toggle Theme"
                >
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>
        <main>
            <section class="hero card">
                <h1 data-i18n="hero.title">
                    Best AI Chatbot: Easily Embed 24/7 Customer Support
                </h1>
                <p data-i18n="hero.desc">
                    輕鬆嵌入免費的 AI
                    Chatbot：客製化助手可提升轉換率。無需程式碼，支援串接知識庫、即時回覆；並能自動偵測語言，以
                    50+ 語言自然應答。
                </p>
                <div class="benefits">
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <span data-i18n="hero.benefit1"
                            >一鍵嵌入：5 分鐘內上線</span
                        >
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <span data-i18n="hero.benefit2"
                            >自訂知識庫：專業、量身訂製回應</span
                        >
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <span data-i18n="hero.benefit4"
                            >多語雙向：自動偵測並以 50+ 語言回覆</span
                        >
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <span data-i18n="hero.benefit3"
                            >24/7 可用性：大幅降低支援成本</span
                        >
                    </div>
                </div>
                <a
                    href="javascript:void(0)"
                    class="btn primary"
                    id="start-trial-btn"
                    data-i18n="hero.cta"
                    >立即開始免費試用</a
                >
            </section>
            <section class="card hidden" id="card-generate">
                <h2 data-i18n="create.title">
                    生成專屬 AI Chatbot 程式碼：免費入門
                </h2>
                <p class="note" data-i18n="create.note">
                    輸入知識庫內容（最多 500 字元），即可生成含有您專屬
                    <code>data-site</code> 的 widget 程式碼。
                </p>
                <div class="field">
                    <label for="kb" data-i18n="create.label"
                        >知識庫內容 (最多 500 字元)</label
                    >
                    <textarea
                        id="kb"
                        maxlength="500"
                        placeholder="描述您的產品、服務或 FAQ..."
                        data-i18n-ph="create.ph"
                    ></textarea>
                    <div class="counter">
                        <span id="kb-count">0</span> / 500
                    </div>
                    <button
                        class="btn primary"
                        id="btn-create"
                        data-i18n="create.btn"
                    >
                        生成 AI Chatbot Widget 程式碼
                    </button>
                </div>
            </section>
            <section class="card hidden" id="card-snippet">
                <h2 data-i18n="quickStart.title">
                    一鍵嵌入：複製下方 widget 程式碼
                </h2>
                <div class="notice-info" data-i18n="quickStart.notice">
                    🔵 右下角的藍色 AI 助理已即時套用您的
                    widget，您可以立即測試互動效果。
                </div>
                <p data-i18n="quickStart.desc">
                    將以下程式碼貼到您的網站（全站 Layout
                    或頁尾），即可快速啟用專屬 AI
                    Chatbot。若您在「生成程式碼」卡片建立了新的
                    <code>data-site</code
                    >，此處程式碼已自動更新；同時，右下角的藍色 AI
                    也已載入您的設定，方便立即驗收。
                </p>
                <div
                    class="code"
                    id="codebox"
                    data-copyable="true"
                    data-hint="Click to copy"
                    title="Click to copy"
                >
                    <pre><code id="embed-code">&lt;script
  src="https://chatbot.aitarf.us/js/ai-helper-loader.js"
  data-position="bottom-right"
  data-site="aitarf_15oJOoBsQFa3"
  data-accent="#2563eb"
  data-width="360"
  data-height="520"
  data-z="2147483000"
  defer
&gt;&lt;/script&gt;</code></pre>
                </div>
                <div
                    class="code"
                    id="mini-code"
                    data-copyable="true"
                    data-hint="Click to copy"
                    title="Click to copy"
                >
                    <pre><code id="embed-mini">&lt;script
  src="https://chatbot.aitarf.us/js/ai-helper-loader.js"
  data-site="aitarf_15oJOoBsQFa3"
  data-accent="#2563eb"
  defer
&gt;&lt;/script&gt;</code></pre>
                </div>
                <h3 data-i18n="params.title" style="margin-top: 16px">
                    自訂您的 AI Chatbot 參數，實現無縫整合
                </h3>
                <div class="table-wrap">
                    <table class="parameters-table">
                        <thead>
                            <tr>
                                <th scope="col" data-i18n="params.th1">屬性</th>
                                <th scope="col" data-i18n="params.th2">必填</th>
                                <th scope="col" data-i18n="params.th4">說明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>src</code></td>
                                <td>
                                    <span class="badge" data-i18n="required"
                                        >必填</span
                                    >
                                </td>
                                <td data-i18n="params.src">
                                    載入 AI chatbot 嵌入核心腳本。
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-position</code></td>
                                <td>
                                    <span class="badge" data-i18n="optional"
                                        >可選</span
                                    >
                                </td>
                                <td data-i18n="params.position">
                                    浮動按鈕位置（預設：右下）。
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-site</code></td>
                                <td>
                                    <span class="badge" data-i18n="required"
                                        >必填</span
                                    >
                                </td>
                                <td data-i18n="params.site">
                                    您的網站 ID，用於載入專屬知識庫與設定。
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-accent</code></td>
                                <td>
                                    <span class="badge" data-i18n="optional"
                                        >可選</span
                                    >
                                </td>
                                <td data-i18n="params.accent">
                                    品牌主色（HEX/RGB），使元件風格與網站一致。
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-width</code></td>
                                <td>
                                    <span class="badge" data-i18n="optional"
                                        >可選</span
                                    >
                                </td>
                                <td data-i18n="params.width">
                                    聊天面板寬度（px）。
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-height</code></td>
                                <td>
                                    <span class="badge" data-i18n="optional"
                                        >可選</span
                                    >
                                </td>
                                <td data-i18n="params.height">
                                    聊天面板高度（px）。
                                </td>
                            </tr>
                            <tr>
                                <td><code>data-z</code></td>
                                <td>
                                    <span class="badge" data-i18n="optional"
                                        >可選</span
                                    >
                                </td>
                                <td data-i18n="params.z">
                                    Z-index，確保元件置於最上層。
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
        <footer data-i18n="footer">© AI Chatbot — Start free today</footer>
        <div id="email-verification-modal" class="hidden">
            <div class="card modal-content">
                <div id="modal-inner"></div>
            </div>
        </div>
        <script>
            let codeCountdown = null;
            const STR = {
                "zh-TW": {
                    title: "AI Chatbot：在您的網站輕鬆嵌入 24/7 智慧助理",
                    brand: "AI Chatbot — 輕鬆嵌入智慧助理",
                    theme: { toggle: "切換主題" },
                    common: {
                        copied: "已複製！",
                        copyHint: "按一下複製",
                        languageTitle: "選擇語言",
                        ok: "完成",
                        error: "請輸入有效的電子郵件",
                        error_1: "請輸入有效的驗證碼",
                        email: "輸入電子郵件…",
                        code: "輸入驗證碼…",
                        emailSent: "驗證碼已寄出，請在 60 秒內輸入。",
                        codeTimeout:
                            "已超過 60 秒，請重新輸入 Email 以取得新的驗證碼。",
                    },
                    hero: {
                        title: "最佳 AI Chatbot：輕鬆嵌入 24/7 客戶支援於您的網站",
                        desc: "輕鬆嵌入免費的 AI Chatbot：客製化助手可提升轉換率。無需程式碼，支援串接知識庫、即時回覆；並能自動偵測語言，多語系自然應答。",
                        benefit1: "一鍵嵌入：立刻上線",
                        benefit2: "自訂知識庫：專業、量身訂製回應",
                        benefit3: "24/7 可用性：大幅降低支援成本",
                        benefit4: "多語系雙向：自動偵測並自然回覆",
                        cta: "立即開始免費試用",
                        ctaStart: "立即開始免費試用", // ★ 新增：尚未驗證 Email
                        ctaKB: "輸入知識庫", // ★ 新增：已驗證但未填知識庫
                        ctaCode: "產生程式碼",
                    },
                    quickStart: {
                        title: "一鍵嵌入：複製下方 widget 程式碼",
                        notice: "🔵 右下角的藍色 AI 助理已即時套用您的 widget，您可以立即測試互動效果。",
                        desc: "將以下程式碼貼到您的網站（全站 Layout 或頁尾），即可快速啟用專屬 AI Chatbot。若您在「生成程式碼」卡片建立新的 data-site，這裡會自動更新，右下角也同步載入設定。",
                    },
                    params: {
                        title: "自訂您的 AI Chatbot 參數，實現無縫整合",
                        th1: "屬性",
                        th2: "必填",
                        th4: "說明",
                        src: "載入 AI chatbot 嵌入核心腳本。",
                        position: "浮動按鈕位置（預設：右下）。",
                        site: "您的網站 ID。",
                        accent: "品牌主色（HEX/RGB）。",
                        width: "聊天面板寬度。",
                        height: "聊天面板高度。",
                        z: "Z-index 以確保置頂。",
                    },
                    required: "必填",
                    optional: "可選",
                    create: {
                        title: "生成專屬 AI Chatbot 程式碼：免費入門",
                        note: "輸入產品／服務知識（最多 500 字），系統會產生包含你的 data-site 的完整 widget 程式碼，並自動更新與複製。",
                        label: "知識庫內容（最多 500 字）",
                        ph: "描述你的產品、服務或 FAQ…",
                        btn: "產生程式碼",
                        loading: "正在產生…",
                        done: "已完成",
                        toastSuccess: "Widget 程式碼已生成並已複製。",
                        toastFailGeneric: "產生失敗，請稍後再試。",
                        toastFailNetwork: "連線逾時或網路異常，請重試。",
                        toastEmpty: "請先輸入知識庫內容。",
                        toastTooShort: "內容過短，至少需 20 個字。",
                        rateLimited: "操作太頻繁，請稍後再試。",
                    },
                    footer: "© AI Chatbot — 立即免費開始",
                },
                "zh-CN": {
                    title: "AI Chatbot：轻松在你的网站嵌入 24/7 智能助手",
                    brand: "AI Chatbot — 轻松嵌入智能助手",
                    theme: { toggle: "切换主题" },
                    common: {
                        copied: "已复制！",
                        copyHint: "点击复制",
                        languageTitle: "选择语言",
                        ok: "完成",
                        error: "请输入有效的电子邮件",
                        error_1: "请输入有效的验证码",
                        email: "输入电子邮件…",
                        code: "输入验证码…",
                        emailSent: "验证码已发送，请在 60 秒内输入。",
                        codeTimeout:
                            "已超过 60 秒，请重新输入 Email 获取新的验证码。",
                    },
                    hero: {
                        title: "最佳 AI Chatbot：轻松嵌入 24/7 客服于你的网站",
                        desc: "轻松嵌入免费的 AI Chatbot：定制助手助你提升转化。无需编码，可接入知识库、即时回复，并自动识别语言，多语系自然应答。",
                        benefit1: "一键嵌入：立刻上线",
                        benefit2: "自定义知识库：专业回复",
                        benefit3: "24/7 可用：降低成本、易扩展",
                        benefit4: "多语系双向：自动识别并自然应答",
                        cta: "立即开始免费试用",
                        ctaStart: "立即开始免费试用",
                        ctaKB: "输入知识库",
                        ctaCode: "生成嵌入代码",
                    },
                    quickStart: {
                        title: "一键嵌入：复制下方代码",
                        notice: "🔵 右下角的蓝色 AI 助理已即时套用你的 widget，可立即测试互动效果。",
                        desc: "将以下代码粘贴到你的网站（全站 Layout 或页脚），即可启用专属 AI Chatbot。若你生成了新的 data-site，这里会自动更新，右下角也同步载入设置。",
                    },
                    params: {
                        title: "自定义 AI Chatbot 参数以实现无缝集成",
                        th1: "属性",
                        th2: "必填",
                        th4: "说明",
                        src: "加载核心脚本。",
                        position: "浮动按钮位置（默认：右下）。",
                        site: "你的网站 ID。",
                        accent: "品牌主色。",
                        width: "面板宽度。",
                        height: "面板高度。",
                        z: "置顶层级。",
                    },
                    required: "必填",
                    optional: "可选",
                    create: {
                        title: "生成专属 AI Chatbot 代码：免费入门",
                        note: "输入产品/服务知识（最多 500 字），系统会生成包含你的 data-site 的完整 widget 代码，并自动更新与复制。",
                        label: "知识库内容（最多 500 字）",
                        ph: "描述你的产品、服务或 FAQ…",
                        btn: "生成嵌入代码",
                        loading: "正在生成…",
                        done: "已完成",
                        toastSuccess: "Widget 代码已生成并复制。",
                        toastFailGeneric: "生成失败，请稍后重试。",
                        toastFailNetwork: "网络异常或超时，请重试。",
                        toastEmpty: "请先输入一些内容。",
                        toastTooShort: "内容过短，至少 20 字。",
                        rateLimited: "操作过于频繁，请稍后重试。",
                    },
                    footer: "© AI Chatbot — 立即免费开始",
                },
                ja: {
                    title: "AI Chatbot：サイトに 24/7 スマートアシスタントを簡単埋め込み",
                    brand: "AI Chatbot — スマートアシスタントを手軽に導入",
                    theme: { toggle: "テーマを切り替え" },
                    common: {
                        copied: "コピーしました！",
                        copyHint: "クリックでコピー",
                        languageTitle: "言語を選択",
                        ok: "完了",
                        error: "有効なメールアドレスを入力してください",
                        error_1: "有効な認証コードを入力してください",
                        email: "メールアドレスを入力…",
                        code: "認証コードを入力…",
                        emailSent:
                            "認証コードを送信しました。60 秒以内に入力してください。",
                        codeTimeout:
                            "60 秒を超えました。新しい認証コードを取得するため、メールアドレスを再入力してください。",
                    },
                    hero: {
                        title: "最高の AI Chatbot：24/7 のサポートを簡単に埋め込み",
                        desc: "無料の AI Chatbot を簡単導入。ナレッジ連携・即時応答・多言語対応により、自然な応答でコンバージョン向上に貢献します。",
                        benefit1: "ワンクリック導入：すぐに公開",
                        benefit2: "カスタム知識ベース：プロ品質の応答",
                        benefit3: "24/7 稼働：コスト削減＆スケール",
                        benefit4: "多言語対応：自動判別し自然に応答",
                        cta: "今すぐ無料で開始",
                        ctaStart: "今すぐ無料で開始",
                        ctaKB: "ナレッジを入力",
                        ctaCode: "コードを生成",
                    },
                    quickStart: {
                        title: "ワンクリック埋め込み：コードをコピー",
                        notice: "🔵 右下の青い AI アシスタントがあなたの widget を即時反映。今すぐ動作をお試しください。",
                        desc: "以下のコードをサイトのレイアウト/フッターに貼り付けるだけ。新しい data-site を生成した場合は自動反映し、右下のアシスタントも同じ設定で稼働します。",
                    },
                    params: {
                        title: "AI Chatbot パラメータ",
                        th1: "属性",
                        th2: "必須",
                        th4: "説明",
                        src: "コアスクリプト",
                        position: "ボタン位置",
                        site: "サイト ID",
                        accent: "ブランド色",
                        width: "幅",
                        height: "高さ",
                        z: "最前面",
                    },
                    required: "必須",
                    optional: "任意",
                    create: {
                        title: "専用 AI Chatbot コードを生成：無料",
                        note: "製品/サービスの知識（最大 500 文字）を入力すると、data-site を含むコードを生成（自動更新＆コピー）。",
                        label: "ナレッジ（最大 500 文字）",
                        ph: "製品・サービス・FAQ を記述…",
                        btn: "コードを生成",
                        loading: "生成中…",
                        done: "完了",
                        toastSuccess: "コードを生成し、コピーしました。",
                        toastFailGeneric: "生成に失敗しました。",
                        toastFailNetwork: "ネットワークエラー/タイムアウト。",
                        toastEmpty: "ナレッジを入力してください。",
                        toastTooShort: "20 文字以上で入力してください。",
                        rateLimited: "操作が頻繁です。少し待ってください。",
                    },
                    footer: "© AI Chatbot — 今すぐ無料で開始",
                },
                en: {
                    title: "AI Chatbot: Embed a 24/7 Smart Assistant on Your Website",
                    brand: "AI Chatbot — Embed a Smart Assistant Easily",
                    theme: { toggle: "Toggle Theme" },
                    common: {
                        copied: "Copied!",
                        copyHint: "Click to copy",
                        languageTitle: "Select language",
                        ok: "Done",
                        error: "Please enter a valid email",
                        error_1: "Please enter a valid verification code",
                        email: "Enter email…",
                        code: "Enter verification code…",
                        emailSent:
                            "Verification code sent. Please enter it within 60 seconds.",
                        codeTimeout:
                            "Time’s up. Please re-enter your email to get a new code.",
                    },
                    hero: {
                        title: "Best AI Chatbot: Easily Embed 24/7 Customer Support on Your Site",
                        desc: "Embed a free AI Chatbot—boost conversions with a customizable assistant. No coding required, knowledge base integration, instant replies, multilingual support with natural responses.",
                        benefit1: "One-Click Embed: Instant Live",
                        benefit2:
                            "Custom Knowledge Base: Professional, Tailored",
                        benefit3: "24/7 Availability: Cut Costs & Scale",
                        benefit4:
                            "Multilingual In/Out: Auto-detect & natural replies",
                        cta: "Start Free AI Chatbot Trial Now",
                        ctaStart: "Start free trial",
                        ctaKB: "Add knowledge",
                        ctaCode: "Generate code",
                    },
                    quickStart: {
                        title: "One-Click Embed: Copy the widget code",
                        notice: "🔵 The blue AI assistant at bottom-right already uses your widget—try it now.",
                        desc: "Paste the code into your site layout/footer to enable your AI Chatbot. If you generated a new data-site above, the code here is updated and the live assistant is already using it.",
                    },
                    params: {
                        title: "Customize your AI Chatbot parameters",
                        th1: "Attribute",
                        th2: "Required",
                        th4: "Description",
                        src: "Load the core script.",
                        position: "Floating button position.",
                        site: "Your site ID.",
                        accent: "Brand color.",
                        width: "Panel width.",
                        height: "Panel height.",
                        z: "Topmost layer.",
                    },
                    required: "Required",
                    optional: "Optional",
                    create: {
                        title: "Generate your AI Chatbot code: free",
                        note: "Enter up to 500 chars of knowledge. We'll generate the widget code with your data-site and auto-update + copy it.",
                        label: "Knowledge Base (max 500)",
                        ph: "Describe your products/services/FAQ…",
                        btn: "Generate code",
                        loading: "Generating…",
                        done: "Done",
                        toastSuccess: "Widget code generated & copied.",
                        toastFailGeneric: "Generation failed. Try again.",
                        toastFailNetwork: "Network error or timeout.",
                        toastEmpty: "Please enter some knowledge first.",
                        toastTooShort: "Content too short (min 20 chars).",
                        rateLimited: "Too many attempts. Please wait.",
                    },
                    footer: "© AI Chatbot — Start free today",
                },
            };
            const savedLang = localStorage.getItem("aiw_lang");
            const savedTheme = localStorage.getItem("aiw_theme") || "light";
            const navLang = (navigator.language || "zh-TW").toLowerCase();
            const guessLang =
                navLang.startsWith("zh-cn") || navLang === "zh"
                    ? "zh-CN"
                    : navLang.startsWith("zh")
                      ? "zh-TW"
                      : navLang.startsWith("ja")
                        ? "ja"
                        : "en";
            let CUR_LANG = savedLang || guessLang;
            document.body.setAttribute("data-theme", savedTheme);
            const themeToggle = document.getElementById("theme-toggle");
            const langSelect = document.getElementById("lang-select");
            function setCodeHints() {
                const T = STR[CUR_LANG] || STR["en"];
                document
                    .querySelectorAll('.code[data-copyable="true"]')
                    .forEach((el) => {
                        el.setAttribute("data-hint", T.common.copyHint);
                        el.setAttribute("title", T.common.copyHint);
                    });
            }
            function updateThemeIcon() {
                const cur = document.body.getAttribute("data-theme");
                if (themeToggle) {
                    themeToggle.innerHTML =
                        cur === "light"
                            ? '<i class="fas fa-moon"></i>'
                            : '<i class="fas fa-sun"></i>';
                }
            }
            function applyLang() {
                const T = STR[CUR_LANG] || STR["en"];
                if (langSelect) langSelect.value = CUR_LANG;
                document.querySelectorAll("[data-i18n]").forEach((el) => {
                    const key = el.getAttribute("data-i18n");
                    const parts = key.split(".");
                    let v = T;
                    for (const p of parts) v = v?.[p];
                    if (typeof v === "string") {
                        if (el.tagName.toLowerCase() === "title")
                            document.title = v;
                        else {
                            if (el.matches("a,button")) el.textContent = v;
                            else el.innerHTML = v;
                        }
                    }
                });
                document.querySelectorAll("[data-i18n-ph]").forEach((el) => {
                    const key = el.getAttribute("data-i18n-ph");
                    const parts = key.split(".");
                    let v = T;
                    for (const p of parts) v = v?.[p];
                    if (typeof v === "string")
                        el.setAttribute("placeholder", v);
                });
                document.querySelectorAll(".badge").forEach((b) => {
                    const attr = b.getAttribute("data-i18n");
                    const isReq = attr && /required/i.test(attr);
                    b.textContent = isReq ? T.required : T.optional;
                });
                if (themeToggle)
                    themeToggle.setAttribute("title", T.theme.toggle);
                if (langSelect)
                    langSelect.setAttribute("title", T.common.languageTitle);
                setCodeHints();
                document.documentElement.setAttribute("lang", CUR_LANG);
                updateThemeIcon();
                updateCTAByProgress();
            }

            function updateCTAByProgress() {
                const btn = document.getElementById("start-trial-btn");
                if (!btn) return;

                const T = STR[CUR_LANG] || STR["en"];
                let label = T.hero?.ctaStart || T.hero?.cta || btn.textContent;

                const email = getCookie("verifiedEmail");
                // const kc = getCookie("knowledgeContext"); // ← 不再需要用它決定 CTA

                if (email) {
                    // 有 cookie：引導去輸入知識庫（卡片二）
                    label = T.hero?.ctaKB || label;
                } else {
                    // 無 cookie：預設開始試用
                    label = T.hero?.ctaStart || label;
                }

                btn.textContent = label;
                btn.setAttribute("aria-label", label);
                btn.setAttribute("title", label);
            }

            if (langSelect) {
                langSelect.addEventListener("change", (e) => {
                    CUR_LANG = e.target.value;
                    localStorage.setItem("aiw_lang", CUR_LANG);
                    applyLang();
                    updateCTAByProgress();
                });
            }
            if (themeToggle) {
                themeToggle.addEventListener("click", () => {
                    const current = document.body.getAttribute("data-theme");
                    const next = current === "light" ? "dark" : "light";
                    document.body.setAttribute("data-theme", next);
                    localStorage.setItem("aiw_theme", next);
                    updateThemeIcon();
                });
            }
            const kb = document.getElementById("kb");
            const kbCount = document.getElementById("kb-count");
            if (kb && kbCount) {
                kb.addEventListener("input", () => {
                    kbCount.textContent = kb.value.length;
                });
            }
            function toast(msg) {
                const t = document.createElement("div");
                t.className = "toast";
                t.textContent = msg;
                document.body.appendChild(t);
                requestAnimationFrame(() => t.classList.add("show"));
                setTimeout(() => {
                    t.classList.remove("show");
                    setTimeout(() => t.remove(), 250);
                }, 1600);
            }
            async function copyText(text) {
                try {
                    await navigator.clipboard.writeText(text);
                } catch {
                    const ta = document.createElement("textarea");
                    ta.value = text;
                    document.body.appendChild(ta);
                    ta.select();
                    document.execCommand("copy");
                    ta.remove();
                }
            }
            function bindClickCopy(container, getter) {
                const T = STR[CUR_LANG] || STR["en"];
                container.addEventListener("click", async () => {
                    await copyText(getter());
                    toast(T.common.copied);
                });
            }
            (function bindCopies() {
                const box1 = document.getElementById("codebox");
                const box2 = document.getElementById("mini-code");
                if (box1)
                    bindClickCopy(
                        box1,
                        () => document.getElementById("embed-code").innerText,
                    );
                if (box2)
                    bindClickCopy(
                        box2,
                        () => document.getElementById("embed-mini").innerText,
                    );
            })();
            const WIDGET_SRC =
                "https://chatbot.aitarf.us/js/ai-helper-loader.js";
            const ACCENT_BLUE = "#2563eb";
            const WIDGET_DEFAULTS = {
                position: "bottom-right",
                width: "360",
                height: "520",
                z: "2147483000",
            };
            function buildSnippet(siteId, opts = {}) {
                const o = "<scr" + "ipt",
                    c = "</scr" + "ipt>";
                const pos = opts.position
                    ? `\n  data-position="${opts.position}"`
                    : "";
                const accent = opts.accent
                    ? `\n  data-accent="${opts.accent}"`
                    : "";
                const w = opts.width ? `\n  data-width="${opts.width}"` : "";
                const h = opts.height ? `\n  data-height="${opts.height}"` : "";
                const z = opts.z ? `\n  data-z="${opts.z}"` : "";
                return `${o}
  src="${WIDGET_SRC}"${pos}
  data-site="${siteId}"${accent}${w}${h}${z}
  defer
>${c}`;
            }
            function buildMiniSnippet(siteId, accent) {
                const o = "<scr" + "ipt",
                    c = "</scr" + "ipt>";
                return `${o}
  src="${WIDGET_SRC}"
  data-site="${siteId}"
  data-accent="${accent}"
  defer
>${c}`;
            }
            function mountDemoWidget(siteId, accent, more = WIDGET_DEFAULTS) {
                document
                    .querySelectorAll('script[src*="ai-helper-loader.js"]')
                    .forEach((s) => s.remove());
                const s = document.createElement("script");
                s.src = WIDGET_SRC;
                s.defer = true;
                if (more.position) s.dataset.position = more.position;
                s.dataset.site = siteId;
                if (accent) s.dataset.accent = accent;
                if (more.width) s.dataset.width = more.width;
                if (more.height) s.dataset.height = more.height;
                if (more.z) s.dataset.z = more.z;
                document.body.appendChild(s);
            }
            function setCookie(name, value, days = 30) {
                const d = new Date();
                d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
                const isHttps = location.protocol === "https:";
                document.cookie = `${name}=${encodeURIComponent(value)};expires=${d.toUTCString()};path=/;SameSite=Lax${isHttps ? ";Secure" : ""}`;
            }
            function getCookie(name) {
                const m = document.cookie.match(
                    new RegExp(`(^|;)\\s*${name}=\\s*([^;]+)`),
                );
                if (!m) return null;
                try {
                    return decodeURIComponent(m[2]);
                } catch {
                    return m[2]; // 萬一不是合法的編碼字串，原樣返回避免拋錯
                }
            }
            function showEmailModal() {
                if (codeCountdown) {
                    clearInterval(codeCountdown);
                    codeCountdown = null;
                }
                const modal = document.getElementById(
                    "email-verification-modal",
                );
                const inner = document.getElementById("modal-inner");
                const T = STR[CUR_LANG] || STR["en"];
                inner.innerHTML = `
                <p>${T.common.email}</p>
                <input type="email" id="email-input" placeholder="${T.common.email}">
                <button class="btn primary" id="submit-email">${T.common.ok}</button>
                <p id="email-error" class="error"></p>
            `;
                modal.classList.remove("hidden");
                document.getElementById("email-input").focus();
                document
                    .getElementById("submit-email")
                    .addEventListener("click", submitEmail);
            }
            async function submitEmail() {
                const email = document
                    .getElementById("email-input")
                    .value.trim();
                const error = document.getElementById("email-error");
                const T = STR[CUR_LANG] || STR["en"];
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!email || !emailRegex.test(email)) {
                    error.textContent = T.common.error;
                    error.style.display = "block";
                    return;
                }
                try {
                    const response = await fetch("/email", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ email }),
                    });
                    const data = await response.json();
                    if (data.code === "1") {
                        toast(T.common.emailSent);
                        showCodeInput(email);
                    } else if (data.code === "2") {
                        error.textContent = T.create.rateLimited;
                        error.style.display = "block";
                    } else if (data.code === "0") {
                        error.textContent = T.common.error;
                        error.style.display = "block";
                    }
                } catch {
                    error.textContent = T.create.toastFailNetwork;
                    error.style.display = "block";
                }
            }
            function showCodeInput(email) {
                const inner = document.getElementById("modal-inner");
                const T = STR[CUR_LANG] || STR["en"];
                let countdown = 60;
                inner.innerHTML = `
                <p>${T.common.code}</p>
                <input type="text" id="code-input" placeholder="${T.common.code}">
                <button class="btn primary" id="verify-code">${T.common.ok}</button>
                <p id="code-error" class="error"></p>
                <p class="countdown" id="countdown">${countdown} 秒後可重新發送</p>
            `;
                const countdownEl = document.getElementById("countdown");
                const resendOptions = document.getElementById("resend-options");
                if (codeCountdown) {
                    clearInterval(codeCountdown);
                    codeCountdown = null;
                }
                codeCountdown = setInterval(() => {
                    countdown--;
                    countdownEl.textContent = `${countdown} 秒後可重新發送`;

                    // 可選的防呆：如果 modal 已關閉就提前清除，避免誤觸發
                    const modalHidden = document
                        .getElementById("email-verification-modal")
                        ?.classList.contains("hidden");
                    if (modalHidden) {
                        clearInterval(codeCountdown);
                        codeCountdown = null;
                        return;
                    }

                    if (countdown <= 0) {
                        clearInterval(codeCountdown);
                        codeCountdown = null;
                        toast(T.common.codeTimeout); // 你前一步新增的多語字串
                        showEmailModal(); // 回到階段一
                    }
                }, 1000);
                document
                    .getElementById("verify-code")
                    .addEventListener("click", () => verifyCode(email), {
                        once: true,
                    });
            }
            async function verifyCode(email) {
                const code = document.getElementById("code-input").value.trim();
                const error = document.getElementById("code-error");
                const modal = document.getElementById(
                    "email-verification-modal",
                );
                const T = STR[CUR_LANG] || STR["en"];
                if (!code) {
                    error.textContent = T.common.error_1;
                    error.style.display = "block";
                    return;
                }
                try {
                    const response = await fetch("/verify-code", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ email, code }),
                    });
                    const data = await response.json();
                    if (data.code === "1") {
                        if (codeCountdown) {
                            clearInterval(codeCountdown);
                            codeCountdown = null;
                        }
                        setCookie("verifiedEmail", email, 30);
                        const cardGenerate =
                            document.getElementById("card-generate");
                        modal.classList.add("hidden");
                        cardGenerate.classList.remove("hidden");
                        const kb = document.getElementById("kb");
                        if (
                            data.knowledgeContext &&
                            typeof data.knowledgeContext === "string" &&
                            data.knowledgeContext.trim() !== ""
                        ) {
                            const kc = data.knowledgeContext
                                .trim()
                                .slice(0, 500);
                            setCookie("knowledgeContext", kc, 30);
                            kb.value = kc;
                            kb.dispatchEvent(new Event("input"));
                        }
                        cardGenerate.scrollIntoView({ behavior: "smooth" });
                        kb.focus();
                        updateCTAByProgress();
                    } else if (data.code === "2") {
                        error.textContent = T.create.rateLimited;
                        error.style.display = "block";
                    } else if (data.code === "0") {
                        error.textContent = T.common.error_1;
                        error.style.display = "block";
                    }
                } catch {
                    error.textContent = T.create.toastFailNetwork;
                    error.style.display = "block";
                }
            }
            const btnStartTrial = document.getElementById("start-trial-btn");
            if (btnStartTrial) {
                btnStartTrial.addEventListener("click", (e) => {
                    e.preventDefault();
                    const email = getCookie("verifiedEmail");
                    if (email) {
                        const cardGenerate =
                            document.getElementById("card-generate");
                        cardGenerate.classList.remove("hidden");
                        cardGenerate.scrollIntoView({ behavior: "smooth" });

                        const kbEl = document.getElementById("kb");
                        const kcRaw = getCookie("knowledgeContext");
                        if (kcRaw && kbEl && !kbEl.value.trim()) {
                            kbEl.value = kcRaw.slice(0, 500);
                            kbEl.dispatchEvent(new Event("input"));
                        }

                        document.getElementById("kb").focus();
                    } else {
                        showEmailModal();
                    }
                });
            }
            (function bindCreateFlow() {
                const btnCreate = document.getElementById("btn-create");
                if (!btnCreate) return;
                const COOLDOWN_MS = 1500;
                let isBusy = false;
                let lastClickAt = 0;
                function setCreateBtnState(state) {
                    const Tt = (STR[CUR_LANG] || STR["en"]).create;
                    if (state === "loading") {
                        btnCreate.setAttribute("aria-busy", "true");
                        btnCreate.setAttribute("disabled", "disabled");
                        btnCreate.textContent = Tt.loading || "Generating…";
                    } else if (state === "done") {
                        btnCreate.removeAttribute("aria-busy");
                        btnCreate.removeAttribute("disabled");
                        btnCreate.textContent = Tt.done || "Done";
                    } else {
                        btnCreate.removeAttribute("aria-busy");
                        btnCreate.removeAttribute("disabled");
                        btnCreate.textContent =
                            Tt.btn || "Generate AI Chatbot Widget Code";
                    }
                }
                btnCreate.addEventListener("click", async () => {
                    const Tt = (STR[CUR_LANG] || STR["en"]).create;
                    const now = Date.now();
                    if (now - lastClickAt < COOLDOWN_MS) {
                        toast(Tt.rateLimited);
                        return;
                    }
                    lastClickAt = now;
                    if (isBusy) return;
                    const email = getCookie("verifiedEmail");
                    if (!email) {
                        showEmailModal();
                        return;
                    }
                    const v = (
                        document.getElementById("kb").value || ""
                    ).trim();
                    if (!v) {
                        toast(Tt.toastEmpty);
                        return;
                    }
                    if (v.length < 20) {
                        toast(Tt.toastTooShort);
                        return;
                    }
                    isBusy = true;
                    setCreateBtnState("loading");
                    console.log("email", email);
                    try {
                        const response = await fetch("/site-id", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ email, knowledge: v }),
                        });
                        const data = await response.json();
                        if (data.siteId) {
                            const full = buildSnippet(data.siteId, {
                                position: WIDGET_DEFAULTS.position,
                                accent: ACCENT_BLUE,
                                width: WIDGET_DEFAULTS.width,
                                height: WIDGET_DEFAULTS.height,
                                z: WIDGET_DEFAULTS.z,
                            });
                            const mini = buildMiniSnippet(
                                data.siteId,
                                ACCENT_BLUE,
                            );
                            const codeFull =
                                document.getElementById("embed-code");
                            const codeMini =
                                document.getElementById("embed-mini");
                            if (codeFull) codeFull.innerText = full;
                            if (codeMini) codeMini.innerText = mini;
                            const cardSnippet =
                                document.getElementById("card-snippet");
                            if (cardSnippet) {
                                cardSnippet.classList.remove("hidden");
                                cardSnippet.scrollIntoView({
                                    behavior: "smooth",
                                });
                            }
                            mountDemoWidget(
                                data.siteId,
                                ACCENT_BLUE,
                                WIDGET_DEFAULTS,
                            );

                            setCookie("knowledgeContext", v, 30);
                            updateCTAByProgress();

                            await copyText(full);
                            toast(Tt.toastSuccess);
                            setCreateBtnState("done");
                            setTimeout(() => setCreateBtnState("idle"), 800);
                        } else {
                            throw new Error(
                                data.message || "Generation failed",
                            );
                        }
                    } catch (e) {
                        toast(
                            e.message === "Network"
                                ? Tt.toastFailNetwork
                                : Tt.toastFailGeneric,
                        );
                        setCreateBtnState("idle");
                    } finally {
                        isBusy = false;
                        setTimeout(() => {
                            lastClickAt = 0;
                        }, COOLDOWN_MS);
                    }
                });
            })();
            applyLang();
        </script>
        <script
            src="https://chatbot.aitarf.us/js/ai-helper-loader.js"
            data-position="bottom-right"
            data-site="aitarf_15oJOoBsQFa3"
            data-accent="#25d366"
            data-width="360"
            data-height="520"
            data-z="2147483000"
            defer
        ></script>
    </body>
</html>
